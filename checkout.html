<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>ØªØ³ÙˆÛŒÙ‡ Ø­Ø³Ø§Ø¨</title>
  <link rel="stylesheet" href="./css/checkout.css">
  <link rel="stylesheet" href="./css/main.css">
  <link rel="stylesheet" href="./css/flexboxgrid.css">
  <link rel="icon" href="./images/favicon.ico">
</head>
<body>
  <div class="checkout-box">
    <h2>ØªØ³ÙˆÛŒÙ‡ Ø­Ø³Ø§Ø¨</h2>
    <form id="checkout-form" method="POST">
      <div class="form-group">
        <label for="name">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
        <input type="text" id="name" name="name" required>
      </div>

      <div class="form-group">
        <label for="phone">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</label>
        <input type="text" id="phone" name="phone" required>
      </div>

      <div class="form-group">
        <label for="address">Ø¢Ø¯Ø±Ø³</label>
        <input type="text" id="address" name="address" required>
      </div>

      <div class="form-group">
        <label for="province">Ø§Ø³ØªØ§Ù†</label>
        <select id="province" name="province" required>
          <option>ØªÙ‡Ø±Ø§Ù†</option>
          <option>Ø§ØµÙÙ‡Ø§Ù†</option>
          <option>ÙØ§Ø±Ø³</option>
          <option>Ú¯ÛŒÙ„Ø§Ù†</option>
          <option>Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ</option>
        </select>
      </div>

      <div class="form-group">
        <label for="payment">Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª</label>
        <select id="payment" name="payment" required>
          <option>Ù¾Ø±Ø¯Ø§Ø®Øª Ø¢Ù†Ù„Ø§ÛŒÙ†</option>
          <option>Ù¾Ø±Ø¯Ø§Ø®Øª Ø¯Ø± Ù…Ø­Ù„</option>
        </select>
      </div>
      <button type="submit" class="btn-submit">Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</button>
      <div class="order-summary" id="summary">
  <h3>Ø®Ù„Ø§ØµÙ‡ Ø³ÙØ§Ø±Ø´</h3>
</div>
</div>
      </div>

      
    </form>
  </div>
  
 <script>
  function loadSummary() {
    const summaryContainer = document.getElementById("summary");
    const cart = JSON.parse(localStorage.getItem("cart")) || [];

    if (!cart.length) {
      summaryContainer.innerHTML = "<p>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª.</p>";
      return;
    }

    let total = 0;
    let html = "<h3>Ø®Ù„Ø§ØµÙ‡ Ø³ÙØ§Ø±Ø´</h3>";

    cart.forEach(item => {
      total += item.price;
      html += `<p>${item.title} Ã— 1 â€” ${item.price.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>`;
    });

    html += `
    <hr><strong>Ø¬Ù…Ø¹ Ú©Ù„: ${total.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</strong>`;
    summaryContainer.innerHTML = html;
  }

  window.onload = loadSummary;
  document.getElementById("checkout-form").addEventListener("submit", function (e) {
    e.preventDefault();

    const name = document.getElementById("name").value;
    const phone = document.getElementById("phone").value;
    const address = document.getElementById("address").value;
    const province = document.getElementById("province").value;
    const payment = document.getElementById("payment").value;
    const cart = JSON.parse(localStorage.getItem("cart")) || [];

    const order = {
      name,
      phone,
      address,
      province,
      payment,
      items: cart,
      createdAt: new Date().toISOString(),
      orderId: Math.floor(Math.random() * 1000000)
    };

    let orders = JSON.parse(localStorage.getItem("orders")) || [];
    orders.push(order);
    localStorage.setItem("orders", JSON.stringify(orders));

  
    localStorage.removeItem("cart");

  
    document.querySelector(".checkout-box").innerHTML = `
      <h2>âœ… Ø³ÙØ§Ø±Ø´ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯!</h2>
      <p>Ø´Ù…Ø§Ø±Ù‡ Ø³ÙØ§Ø±Ø´: <strong>#${order.orderId}</strong></p>
      <p>Ø§Ø² Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ Ù…ØªØ´Ú©Ø±ÛŒÙ… ğŸ™</p>
      <a href="home.html" style="display:inline-block;margin-top:20px;color:#28a745">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
    `;
  });
</script>
</body>
</html>